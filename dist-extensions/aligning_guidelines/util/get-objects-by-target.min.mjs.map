{"version":3,"file":"get-objects-by-target.min.mjs","sources":["../../../extensions/aligning_guidelines/util/get-objects-by-target.ts"],"sourcesContent":["import type { FabricObject } from 'fabric';\nimport { ActiveSelection, Group } from 'fabric';\n\nexport function getObjectsByTarget(target: FabricObject) {\n  const objects = new Set<FabricObject>();\n  const canvas = target.canvas;\n  if (!canvas) return objects;\n  const children =\n    target instanceof ActiveSelection ? target.getObjects() : [target];\n\n  canvas.forEachObject((o) => {\n    if (!o.isOnScreen()) return;\n    if (!o.visible) return;\n    if (o.constructor == Group) {\n      collectObjectsByGroup(objects, o);\n      return;\n    }\n    objects.add(o);\n  });\n\n  deleteObjectsByList(objects, children);\n  return objects;\n}\n\nfunction deleteObjectsByList(objects: Set<FabricObject>, list: FabricObject[]) {\n  for (const target of list) {\n    if (target.constructor == Group) {\n      deleteObjectsByList(objects, (target as Group).getObjects());\n    } else {\n      objects.delete(target);\n    }\n  }\n}\n\nfunction collectObjectsByGroup(objects: Set<FabricObject>, g: Group) {\n  const children = g.getObjects();\n  for (const child of children) {\n    if (!child.visible) continue;\n    if (child.constructor == Group) {\n      collectObjectsByGroup(objects, child);\n      continue;\n    }\n    objects.add(child);\n  }\n}\n"],"names":["getObjectsByTarget","target","objects","Set","canvas","children","ActiveSelection","getObjects","forEachObject","o","isOnScreen","visible","constructor","Group","add","collectObjectsByGroup","deleteObjectsByList","list","delete","g","child"],"mappings":"oDAGO,SAASA,EAAmBC,GACjC,MAAMC,EAAU,IAAIC,IACdC,EAASH,EAAOG,OACtB,IAAKA,EAAQ,OAAOF,EACpB,MAAMG,EACJJ,aAAkBK,EAAkBL,EAAOM,aAAe,CAACN,GAa7D,OAXAG,EAAOI,eAAeC,IACfA,EAAEC,cACFD,EAAEE,UACHF,EAAEG,aAAeC,EAIrBX,EAAQY,IAAIL,GAHVM,EAAsBb,EAASO,GAGnB,IAGhBO,EAAoBd,EAASG,GACtBH,CACT,CAEA,SAASc,EAAoBd,EAA4Be,GACvD,IAAK,MAAMhB,KAAUgB,EACfhB,EAAOW,aAAeC,EACxBG,EAAoBd,EAAUD,EAAiBM,cAE/CL,EAAQgB,OAAOjB,EAGrB,CAEA,SAASc,EAAsBb,EAA4BiB,GACzD,MAAMd,EAAWc,EAAEZ,aACnB,IAAK,MAAMa,KAASf,EACbe,EAAMT,UACPS,EAAMR,aAAeC,EAIzBX,EAAQY,IAAIM,GAHVL,EAAsBb,EAASkB,GAKrC"}